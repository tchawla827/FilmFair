{% extends 'base.html' %}
{% load static %}

{% block title %}
<title>BoxOffice | Home</title>
{% endblock %}

{% block style %}
<link rel="stylesheet" href={% static "styles/login.css" %} />
{% endblock %}

{% block content %}



<div class="container-fluid">
    <div class="row justify-content-end">
        <div class="col-lg-5 col-12">
            <form action="register" method="POST" class="text-white register">
                {% csrf_token %}

                    <h1>Registration</h1>

                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input class="form-control" type="text" placeholder="username" name="username" required>
                </div>
                <div class="form-row">
                <div class="form-group col-md-6 col-12">
                    <label class="form-label "> First Name</label>
                    <input class="form-control" type="text" placeholder="firstname" name="firstname" required>
                </div>
                <div class="form-group col-md-6 col-12">
                    <label class="form-label ">Last Name</label>
                    <input class="form-control" type="text" placeholder="lastname" name="lastname" required>
                </div>
                </div>
                <div class="form-group">
                    <label class="form-label"><i class="fa fa-envelope-o" aria-hidden="true"></i> E-mail</label>
                    <input class="form-control" type="email" placeholder="@" name="email" required>
                </div>
                <div class="form-row">
                    <div class="form-row">
                        <div class="form-group col-md-6 col-12">
                          <label>Password</label>
                          <input
                            class="form-control"
                            type="password"
                            name="password1"
                            placeholder="••••••••"
                            minlength="8"
                            pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*\W).{8,}"
                            title="At least 8 characters, with upper & lower case, a number and a special character"
                            required
                          >
                        </div>
                        <div class="form-group col-md-6 col-12">
                          <label>Repeat Password</label>
                          <input
                            class="form-control"
                            type="password"
                            name="password2"
                            placeholder="••••••••"
                            required
                          >
                        </div>
                      </div>
                </div>
                <input class="btn btn-primary btn-lg btn-block" type="submit" value="Register">
                <a href="/accounts/register_cinema" class="btn btn-primary btn-block" style="width: 100%">Register as Cinema</a>
            </form>
        </div>
    </div>
</div>
{% block extra_js %}
<script>
  const form = document.querySelector('.register');
  const pwd1 = form.querySelector('[name="password1"]');
  const pwd2 = form.querySelector('[name="password2"]');
  const msg = document.createElement('div');
  msg.className = 'text-danger small mt-1';
  pwd2.parentNode.appendChild(msg);

  form.addEventListener('submit', e => {
    msg.textContent = '';
    if (pwd1.value !== pwd2.value) {
      e.preventDefault();
      msg.textContent = 'Passwords do not match';
      pwd2.focus();
    }
  });
</script>
{% endblock %}
{% for message in messages %}
<h4> {{message}} </h4>
{% endfor %}

{% endblock %}